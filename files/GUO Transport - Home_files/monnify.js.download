!function(){var r,e;Element.prototype.addEventListener||(r=[],e=function(e,t){var n,o,a=this,i=function(e){e.target=e.srcElement,e.currentTarget=a,"undefined"!=typeof t.handleEvent?t.handleEvent(e):t.call(a,e)};"DOMContentLoaded"===e?(n=function(e){"complete"===document.readyState&&i(e)},document.attachEvent("onreadystatechange",n),r.push({object:this,type:e,listener:t,wrapper:n}),"complete"===document.readyState&&((o=new Event).srcElement=window,n(o))):(this.attachEvent("on"+e,i),r.push({object:this,type:e,listener:t,wrapper:i}))},Element.prototype.addEventListener=e,HTMLDocument&&(HTMLDocument.prototype.addEventListener=e),Window&&(Window.prototype.addEventListener=e))}();var MonnifySDK=function(){window.MonnifySDK={},MESSAGE_TYPE={CLOSE:"MonnifyPopupClose",COMPLETE:"MonnifyPopupComplete",LOADED:"MonnifyPopupLoaded",CANCEL:"MonnifyPopupCancel",INIT_POPUP:"INIT_POPUP",TRANSACTION_SUCCESS:"TRANSACTION_SUCCESS",TRANSACTION_FAILED:"TRANSACTION_FAILED"};var s={StageId:"MonnifyFrame",StageName:"MonnifyFrame",PaymentFormName:"MonnifyPaymentForm",StyleId:"MonnifyStyles",PreLoaderId:"MonnifyPreLoader",LoadedMessageType:"MonnifyPopupLoaded",ClosePopupMessageType:"MonnifyPopupClose",TransactionCompletedMessageType:"MonnifyPopupComplete",AttributePrefix:"data-monnify-",MonnifyButtonIdentifier:"monnify-payment-buttons"};const d={SUCCESS:"SUCCESS",PAID:"PAID",PARTIALLY_PAID:"PARTIALLY_PAID",OVERPAID:"OVERPAID"};var c={stageDOM:null,preLoader:null},m=function(e){return l(e)?e.compatibilityMode?{APP_URL:"https://sandbox.sdk.monnify.com/compatibility-mode",APP_ORIGIN:"https://sandbox.monnify.com"}:{APP_URL:"https://sandbox.sdk.monnify.com",APP_ORIGIN:"https://sandbox.monnify.com"}:e.compatibilityMode?{APP_URL:"https://sdk.monnify.com/compatibility-mode",APP_ORIGIN:"https://api.monnify.com"}:{APP_URL:"https://sdk.monnify.com",APP_ORIGIN:"https://api.monnify.com"}};var l=function(e){return!(e&&e.apiKey&&e.apiKey.indexOf)||-1===e.apiKey.indexOf("MK_PROD_")},p=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},u=function(e){return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e)},y=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},f=function(e){return!!e&&e&&"[object Function]"==={}.toString.call(e)},h=function(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/gm.test(e)},v=function(e){e="MNFY|PAYREF|"+(l(e)?"TEST|":"");return e+="GENERATED|"+(new Date).valueOf()+Math.floor(1e6*Math.random()+1)},S=function(e){e.className=e.className.replace(/(?:^|\s)show(?!\S)/g,""),e.className.match(/(?:^|\s)hide(?!\S)/g)||(e.className+=" hide")};return{bootstrap:function(){var e=document.getElementsByClassName(s.MonnifyButtonIdentifier);if(!(e&&e.length<1))for(var t=0;t<e.length;t++){var n=e[t];bindAction(n)}},initialize:e=>{const n=(e=e)?(e.reference?e.reference=""+e.reference:e.reference=v(e),e):{};"undefined"==typeof n.showLoadingState&&(n.showLoadingState=!0);var t,o,e=(e=n)?e.customerEmail&&p(e.customerEmail)?e.amount&&y(e.amount)?e.currency&&""!==e.currency.trim()?e.paymentDescription&&""!==e.paymentDescription.trim()?e.contractCode?e.redirectUrl&&!h(e.redirectUrl)?{status:!1,reason:"Monnify: Invalid redirectUrl"}:e.apiKey?e.onClose&&!f(e.onClose)?{status:!1,reason:"Monnify: Invalid onClose function."}:e.onComplete&&!f(e.onComplete)?{status:!1,reason:"Monnify: Invalid onComplete function."}:e.metadata&&!u(e.metadata)?{status:!1,reason:"Monnify: Invalid metadata."}:{status:!0}:{status:!1,reason:"Monnify: Invalid API Key"}:{status:!1,reason:"Monnify: Invalid Contract Code"}:{status:!1,reason:"Monnify: Payment description is required."}:{status:!1,reason:"Monnify: Currency is required."}:{status:!1,reason:"Monnify: Invalid Amount."}:{status:!1,reason:"Monnify: Customer email not provided or invalid"}:{status:!1,reason:"Monnify: Invalid Payment Data."};if(!e.status)return console.log(e.reason);if(e='.monnify-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000002920290930192028202832830832083038392082038032830283}#MonnifyFrame,#MonnifyPreLoader,.monnify-frame{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483647;margin:0;padding:0;border:none;outline:0}.hide{display:none;visibility:hidden}.show{display:block;visibility:visible}#MonnifyPreLoader,.monnify-frame{background:rgba(52,52,52);text-align:center;transition-property:visibility,display;transition-duration:.6s;transition-timing-function:ease-in-out}#MonnifyPreLoader .lds-spinner,.monnify-frame .lds-spinner{top:50%;margin-top:-40px}.lds-spinner{color:#fff;display:inline-block;position:relative;width:64px;height:64px}.lds-spinner div{transform-origin:32px 32px;animation:lds-spinner 1.2s linear infinite}.lds-spinner div:after{content:" ";display:block;position:absolute;top:3px;left:29px;width:5px;height:14px;border-radius:20%;background:#fff}.lds-spinner div:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner div:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner div:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner div:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner div:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner div:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner div:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner div:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner div:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner div:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner div:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner div:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}100%{opacity:0}}body{margin:0;padding:0}',t=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("style")).type="text/css",o.id=s.StyleId,o.styleSheet?(o.styleSheet.cssText=e,o.styleSheet.insertRule(e,0)):o.appendChild(document.createTextNode(e)),t.appendChild(o),(e=document.getElementById(s.PreLoaderId))?c.preLoader=e:(e='<div class="'+s.PreLoaderId+' hide" id="'+s.PreLoaderId+'"><div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>',document.body.insertAdjacentHTML("beforeend",e),c.preLoader=document.getElementById(s.PreLoaderId)),n.onLoadStart&&f(n.onLoadStart)&&n.onLoadStart(),n.showLoadingState&&((o=document.querySelector("."+s.PreLoaderId)).className=o.className.replace(/(?:^|\s)hide(?!\S)/g,""),o.className.match(/(?:^|\s)hide(?!\S)/g)||(o.className+=" show")),!document.querySelector("#monnify_app_wrapper")){const a=document.createElement("iframe"),i=document.createElement("div"),r=(i.id="monnify_app_wrapper",i.setAttribute("class","monnify-wrapper"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("allow","geolocation;clipboard-write"),a.setAttribute("style","border:0px !important;"),a.setAttribute("class","monnify-frame"),window.conatiner=i,{amount:n.amount,customerName:n.customerName,customerEmail:n.customerEmail,reference:n.reference||v(n),paymentDescription:n.paymentDescription,currencyCode:n.currency,currency:n.currency,contractCode:n.contractCode,apiKey:n.apiKey,metaData:n.metadata||n.metaData,paymentMethods:n.paymentMethods,collectionChannel:n.collectionChannel,redirectUrl:n.redirectUrl,incomeSplitConfig:n.incomeSplitConfig,otherPaymentData:{httpBrowserLanguage:"en-US",httpBrowserJavaEnabled:!1,httpBrowserJavaScriptEnabled:"true",httpBrowserColorDepth:"24",httpBrowserScreenHeight:""+window.innerHeight,httpBrowserScreenWidth:""+window.innerWidth,httpBrowserTimeDifference:"",userAgentBrowserValue:navigator.userAgent}});a.onload=function(){n.onLoadComplete&&f(n.onLoadComplete)&&n.onLoadComplete(),a?.contentWindow?.postMessage({type:MESSAGE_TYPE.INIT_POPUP,data:r},"*"),window.addEventListener("message",function(e){var e=e.data,t=e?.data||{};t.authorizedAmount=t?.payableAmount||t?.authorizedAmount,t.paidOn=t?.completedOn,t.redirectUrl=r.redirectUrl,n.redirectUrl,t.status=function(e){var t;if(e)return t=[d.SUCCESS,d.PAID,d.OVERPAID,d.PARTIALLY_PAID],e=e.toUpperCase(),-1<t.indexOf(e)}(t.paymentStatus||t?.status)?"SUCCESS":"FAILED",e.type===MESSAGE_TYPE.CANCEL||e.type===MESSAGE_TYPE.CLOSE?(window.document.body.removeChild(window.conatiner),n.onClose({redirectUrl:r.redirectUrl,responseCode:"USER_CANCELLED",paymentStatus:"USER_CANCELLED",responseMessage:"User cancelled Transaction",authorizedAmount:r.amount}),S(document.querySelector("."+s.PreLoaderId))):e.type===MESSAGE_TYPE.TRANSACTION_SUCCESS?(window.document.body.removeChild(window.conatiner),n.onComplete(t),n.onClose(t),S(document.querySelector("."+s.PreLoaderId))):e.type===MESSAGE_TYPE.TRANSACTION_FAILED&&(window.document.body.removeChild(window.conatiner),S(document.querySelector("."+s.PreLoaderId)),n.onComplete(t),n.onClose(t))})},fetch(m(r).APP_URL+"/app/transaction/init",{method:"POST",body:JSON.stringify({...r}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{a.setAttribute("src",m(r).APP_URL+"/checkout/"+e.data.paymentData.transactionReference)})["catch"](e=>{var t;a.setAttribute("src",(t=n,l(t)?"https://sandbox.sdk.monnify.com":"https://sdk.monnify.com"))})["finally"](()=>{i.appendChild(a),window.document.body.appendChild(i)})}},setup:function(t){var e=function(e){e={reference:e.paymentReference,trans:e.transactionReference,status:"SUCCESS"===e.status||"PAID"===e.paymentStatus?"success":"failed",message:"SUCCESS"===e.status||"PAID"===e.paymentStatus?"Approved":"Failed",transaction:e.transactionReference,trxref:e.paymentReference};t.callback(e)},n=(t.firstname||"")+" "+(t.lastname||""),o=t.currency,a=parseInt(t.amount)/100,i=n+" "+o+" "+a;return{openIframe:function(){window.MonnifySDK.initialize({compatibilityMode:!0,paymentDescription:i,amount:a,currency:t.currency,reference:t.ref,customerName:n,customerEmail:t.email,contractCode:t.contractCode||"N/A",apiKey:t.key,onComplete:e,onClose:t.onClose,metadata:t.metadata})}}}}}(),getpaidSetup=function(t){var e=t.customer_firstname||"";return MonnifySDK.initialize({compatibilityMode:!0,paymentDescription:"",amount:t.amount,currency:t.currency,reference:t.txref,customerName:e+=" "+(t.customer_lastname||""),customerEmail:t.customer_email,customerMobileNumber:t.customer_phone,contractCode:"N/A",apiKey:t.PBFPubKey,onComplete:function(e){e={name:"opop",data:{data:{responsecode:"00",responsetoken:"mocktoken",responsemessage:"successful"},airtime_flag:null},tx:{txRef:e.paymentReference,orderRef:e.transactionReference,cycle:"one-time",amount:e.authorizedAmount,charged_amount:e.authorizedAmount,chargeResponseCode:"00",chargeResponseMessage:e.message,currency:t.currency,status:e.status,vbvrespmessage:e.status,vbvrespcode:"00",paymentType:"card",fraud_status:"ok",charge_type:"normal",is_live:-1<t.PBFPubKey.indexOf("MK_PROD_"),customer:{phone:t.customer_phone,email:t.customer_email}},success:"SUCCESS"===e.status||"PAID"===e.paymentStatus};t.callback(e)},onClose:t.onclose,metadata:t.meta.reduce(function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t}),paymentDescription:t.custom_description||""}),{close:function(){var e=document.getElementById("MonnifyFrame");e&&e.remove()}}};